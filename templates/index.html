<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="{{url_for('static', filename='images/fsulogo.jpg')}}" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{url_for('static', filename='styles.css')}}">
</head>
<body>
    <div class="navbar">
        <div class="logoAndTitleHolder">
            <div class="logoHolder" onclick="document.location='{{url_for('index')}}'"></div>
            <h1>FSU TASK TRACKER</h1>
        </div>
        <div class="userHolder" onclick="document.location='{{url_for('login')}}'">
            <div class="profilePicHolder"></div>
            <h4>Hello {{user_name}}!</h4>
        </div>
    </div>
    <div class="sortHolder">
        <div class="filter-group">
            <i class="fas fa-filter"></i>
            <select name="taskType" id="taskType">
                <option value="all">All Tasks</option>
                <option value="task_assigned_to">Assigned to Me</option>
                <option value="task_assigned_by">Assigned by Me</option>
            </select>
        </div>
        <div class="filter-group">
            <i class="fas fa-sort"></i>
            <select name="sortBy" id="sortBy">
                <option value="default">Default</option>
                <option value="task_deadline">Due Date</option>
                <option value="task_percentage">Percentage</option>
            </select>
        </div>
        <button type="button" class="sort-btn" onclick="sortData()">
            <i class="fas fa-check"></i>
            Apply
        </button>
    </div>
    <div class="body">
        <div class="contentHolder" id="contentHolder">
            <!-- JS will inject content here -->
        </div>
        <div class="sidebar">
            <div class="buttons">
                <button class="add" type="button" onclick="document.location='{{url_for('form')}}'" title="Add New Task">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="archive" type="button" onclick="document.location='{{url_for('completed.showCompletedTask')}}'" title="View Completed">
                    <i class="fas fa-archive"></i>
                </button>
            </div>
        </div>
    </div>
</body>
<script>
    function outputData(){
    return {{ client_data|tojson }};
    }
    function editData(i,j){
        document.location= `{{url_for('edit.edit')}}?task_id=${i}&task_id_db=${j}`;
    }
    function finishData(i,j){
        document.location= `{{url_for('archive.archiveTask')}}?task_id=${i}&task_id_db=${j}`;
    }
    function deleteData(i,j){
        if(confirm("Are you sure you want to delete this task?")){
            document.location= `{{url_for('taskHandler.deleteTask')}}?task_id=${i}&task_id_db=${j}`;
        }
    }
    function sortData(){
        const taskType = document.getElementById("taskType").value;
        const sortBy = document.getElementById("sortBy").value;
        console.log("Sorting by:", sortBy, "Task type:", taskType);
        document.location=`{{url_for('index')}}?task_type=${taskType}&sort_by=${sortBy}`;
    }
</script>
<script src="{{url_for('static', filename='script.js')}}"></script>

<script>
       
</script>
</html>